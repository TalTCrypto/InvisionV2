#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-push checks..."

# Linter tout le projet
echo "ğŸ“ Linting..."
npm run lint || {
  echo "âŒ Erreurs de linting dÃ©tectÃ©es. Corrigez-les avant de push."
  exit 1
}

# VÃ©rifier le formatage
echo "âœ¨ VÃ©rification du formatage..."
npm run format:check || {
  echo "âš ï¸  Fichiers non formatÃ©s dÃ©tectÃ©s."
  echo "ğŸ’¡ ExÃ©cutez 'npm run format:write' pour corriger automatiquement."
  echo "âš ï¸  Push autorisÃ© mais pensez Ã  formater vos fichiers."
}

# VÃ©rifier que Prisma est synchronisÃ©
echo "ğŸ“¦ VÃ©rification Prisma..."
npx prisma validate || {
  echo "âŒ Erreur dans le schÃ©ma Prisma. Corrigez avant de push."
  exit 1
}

echo "âœ… Pre-push checks passed!"
